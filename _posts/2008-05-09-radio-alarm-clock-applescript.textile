---
layout: post
title: Radio Alarm Clock Applescript
---

Getting back to uni a couple of weeks ago, my radio alarm clock died. I'm not sure what is wrong with it, but for a week I was being woken by the sound of my mobile phone alarm. I found myself missing the sound of <a class="ext" href="http://www.bbc.co.uk/radio1/chrismoyles/">Chris Moyles</a> in the morning, so what does any self respecting geek do? I write a script to turn my laptop into a radio alarm clock, with the help of <a class="ext" href="http://www.elgato.com">EyeTV</a>.
<pre class="textmate-source mac_classic"><span class="source source_applescript"><span class="keyword keyword_control keyword_control_applescript">set</span> volume <span class="constant constant_numeric constant_numeric_applescript">2.5</span>
<span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">today</span> <span class="keyword keyword_control keyword_control_applescript">to</span> <span class="support support_class support_class_built-in support_class_built-in_applescript">date</span> <span class="support support_class support_class_built-in support_class_built-in_applescript">string</span> <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">of</span> <span class="punctuation punctuation_section punctuation_section_group punctuation_section_group_applescript">(</span><span class="support support_function support_function_standardadditions support_function_standardadditions_miscellaneous support_function_standardadditions_miscellaneous_applescript">current date</span><span class="punctuation punctuation_section punctuation_section_group punctuation_section_group_applescript">)</span>
<span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">title_to_play</span> <span class="keyword keyword_control keyword_control_applescript">to</span> <span class="string string_quoted string_quoted_double string_quoted_double_applescript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span>Chris Moyles<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span></span>
<span class="meta meta_tell-block meta_tell-block_application meta_tell-block_application_generic meta_tell-block_application_generic_applescript"><span class="keyword keyword_control keyword_control_applescript">tell</span> <span class="support support_class support_class_built-in support_class_built-in_applescript">application</span> <span class="string string_quoted string_quoted_double string_quoted_double_application-name string_quoted_double_application-name_applescript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span>EyeTV<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span></span>
    <span class="support support_function support_function_standard-suite support_function_standard-suite_applescript">activate</span>
    volume_change level <span class="constant constant_numeric constant_numeric_applescript">1</span>
    <span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">no_recordings</span> <span class="keyword keyword_control keyword_control_applescript">to</span> <span class="support support_function support_function_built-in support_function_built-in_applescript">number of</span> <span class="support support_class support_class_standard-suite support_class_standard-suite_applescript">items</span> <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">in</span> recordings
    <span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">i</span> <span class="keyword keyword_control keyword_control_applescript">to</span> <span class="constant constant_numeric constant_numeric_applescript">0</span>
    <span class="keyword keyword_control keyword_control_applescript">repeat until</span> i <span class="keyword keyword_operator keyword_operator_applescript">is equal to</span> no_recordings
        <span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">i</span> <span class="keyword keyword_control keyword_control_applescript">to</span> i <span class="keyword keyword_operator keyword_operator_applescript">+</span> <span class="constant constant_numeric constant_numeric_applescript">1</span>
        <span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">recording_item</span> <span class="keyword keyword_control keyword_control_applescript">to</span> <span class="support support_class support_class_standard-suite support_class_standard-suite_applescript">item</span> i <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">of</span> recordings
        <span class="keyword keyword_control keyword_control_applescript">set</span> <span class="variable variable_other variable_other_applescript">recording_time</span> <span class="keyword keyword_control keyword_control_applescript">to</span> start time <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">of</span> recording_item
        <span class="keyword keyword_control keyword_control_applescript">if</span> <span class="support support_class support_class_built-in support_class_built-in_applescript">date</span> <span class="support support_class support_class_built-in support_class_built-in_applescript">string</span> <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">of</span> <span class="punctuation punctuation_section punctuation_section_group punctuation_section_group_applescript">(</span>recording_time<span class="punctuation punctuation_section punctuation_section_group punctuation_section_group_applescript">)</span> <span class="keyword keyword_operator keyword_operator_applescript">is equal to</span> today <span class="keyword keyword_control keyword_control_applescript">then</span>
            <span class="keyword keyword_control keyword_control_applescript">if</span> title <span class="keyword keyword_control keyword_control_reference keyword_control_reference_applescript">of</span> recording_item <span class="keyword keyword_operator keyword_operator_applescript">contains</span> title_to_play <span class="keyword keyword_control keyword_control_applescript">then</span>
                play recording_item
            <span class="keyword keyword_control keyword_control_applescript">end if</span>
        <span class="keyword keyword_control keyword_control_applescript">end if</span>
    <span class="keyword keyword_control keyword_control_applescript">end repeat</span>
<span class="keyword keyword_control keyword_control_applescript">end tell</span></span></span></pre>
Firstly, it sets the volume, so I can have my Mac muted through the night and when the script is activated, the volume will be turned up. It then sets the date to a string and we give a name which needs to be in the title of recordings we wish to play. The script then loops through all the recordings to find any made today. When it finds one, which also contains "Chris Moyles" in the title, we tell EyeTV to play it.

You could look for any string or take out the check completely to play all of today's recordings.

You also need to set up a schedule in EyeTV to record the shows you want to play back, making sure that they start recording before you want to be woken up. In the event that EyeTV didn't record (through error or Moyles not actually being on) I have extended the script by adding the following if no recordings were found.
<pre class="textmate-source mac_classic"><span class="source source_applescript"><span class="meta meta_tell-block meta_tell-block_application meta_tell-block_application_itunes meta_tell-block_application_itunes_applescript"><span class="keyword keyword_control keyword_control_applescript">tell</span> <span class="support support_class support_class_itunes support_class_itunes_applescript">application</span> <span class="string string_quoted string_quoted_double string_quoted_double_application-name string_quoted_double_application-name_applescript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span>iTunes<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span></span>
    <span class="support support_function support_function_standard-suite support_function_standard-suite_applescript">activate</span>
    <span class="support support_function support_function_itunes support_function_itunes_applescript">play</span> <span class="support support_class support_class_itunes support_class_itunes_applescript">playlist</span> <span class="string string_quoted string_quoted_double string_quoted_double_applescript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span>Party Shuffle<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_applescript">"</span></span>
<span class="keyword keyword_control keyword_control_applescript">end tell</span></span></span></pre>
This will play my party shuffle playlist in iTunes so I'll always have something to wake up to.

At the moment, I'm triggering this script using an event in iCal, using the "Run Script" option in the alarms section. I'm trying to find a better solution to this, so if anyone has any suggestions, please post them.